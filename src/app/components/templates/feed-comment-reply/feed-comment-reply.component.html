<div class="reply-row" [attr.id]="'r-' + reply.replyId">
    <img class="profile-picture" [src]="reply.profilePicture" [attr.alt]="reply.username" />

    <div class="reply-grid">
        <div class="reply-main">
            <div class="username-line">
                <a class="profile-username" [href]="'/account/' + reply.username + '/posts'">{{ reply.username }}</a>

                <span class="chevron">â€º</span>

                <a class="atted-username" [href]="'/account/' + reply.replyingToUsername + '/posts'">{{ reply.replyingToUsername }}</a>
            </div>

            <p class="reply-text">
                <ng-container *ngFor="let t of tokensOf(reply.comment)">
                    <ng-container *ngIf="t.handle; else plain">
                        <a class="atted"
                            [class.adjacent]="t.adjacentPrev"
                            [href]="'/account/' + commentModerationService.canonicalizeHandle(t.handle!) + '/posts'">
                            &#64;{{ commentModerationService.canonicalizeHandle(t.handle!) }}
                        </a>
                    </ng-container>

                    <ng-template #plain>{{ t.text }}</ng-template>
                </ng-container>
            </p>

            <div class="options">
                <span class="likes">{{ reply.likes.length }} {{ reply.likes.length === 1 ? 'like' : 'likes' }}</span>

                <button class="reply-button" type="button" (click)="onReply()">Reply</button>

                <span class="date">{{ formatDate(reply.commentDate) }}</span>
            </div>
        </div>

        <div class="reply-like">
            <button type="button" class="icon-btn" (click)="toggleReplyLike()" [attr.aria-pressed]="reply.likes.includes(currentUser.username)">
                <i class="{{ reply.likes.includes(currentUser.username) ? 'bx bxs-like' : 'bx bx-like' }}"></i>
            </button>
        </div>
    </div>
</div>