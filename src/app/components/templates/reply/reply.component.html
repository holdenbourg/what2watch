<div class="reply-row" [attr.id]="'r-' + reply.replyId">
  <img class="profile-picture" [src]="reply.profilePicture" [attr.alt]="reply.username" loading="lazy" decoding="async" />

  <div class="reply-grid">
    <div class="reply-main">
      <div class="username-line">
        <a class="profile-username" [href]="'/account/' + reply.username">{{ reply.username }}</a>
        <span class="chevron">â€º</span>
        <a class="atted-username" [href]="'/account/' + reply.replyingToUsername">{{ reply.replyingToUsername }}</a>
      </div>

      <p class="reply-text">        
        <ng-container *ngFor="let t of tokensOf(reply.comment)">
          <ng-container *ngIf="t.handle; else plain">
            <a class="atted" 
               [href]="'/account/' + t.handle"
               [class.clickable]="t.handle">
              {{ t.text }}
            </a>
          </ng-container>
          <ng-template #plain>{{ t.text }}</ng-template>
        </ng-container>
      </p>

      <div class="options">
        <span class="likes">
          {{ reply.likeCount || 0 }}
          {{ (reply.likeCount || 0) === 1 ? 'like' : 'likes' }}
        </span>
        
        <button class="reply-button" type="button" (click)="requestReply()">Reply</button>
        
        <span class="date">{{ formatDate(reply.commentDate) }}</span>
      </div>
    </div>

    <div class="reply-like">
      <button
        type="button"
        class="icon-btn"
        (click)="toggleLike()"
        [disabled]="submittingLike"
        [attr.aria-pressed]="meLiked"
        title="Like reply"
      >
        <i class="{{ meLiked ? 'bx bxs-like' : 'bx bx-like' }}"></i>
      </button>
    </div>
  </div>
</div>