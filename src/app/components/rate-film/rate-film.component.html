<div class="container">
  <div class="left-side">
    <app-rate-item
      #rater
      [title]="titleText"
      [criteria]="criteria"
      (rated)="onRated($event)">
    </app-rate-item>
  </div>

  <div class="right-side">
    <div class="film-information" *ngIf="type === 'movie'">
      <div class="film-text">
        <p class="title">{{ activeMovie?.title }}</p>
        <p class="release" *ngIf="activeMovie?.release_date">{{ formatReleaseDate(activeMovie?.release_date) }}</p>

        <div class="meta">
          <span class="badge" *ngIf="activeMovie?.rated">{{ activeMovie?.rated }}</span>

          <span class="badge" *ngIf="(genresText || '').length">
            {{ (genresText || '').split(', ').join(' • ') }}
          </span>
        </div>

        <div class="counts">
          <div class="count">
            <div class="count-num">{{ count1Num }}</div>
            <div class="count-label">{{ count1Label }}</div>
          </div>
          
          <div class="count">
            <div class="count-num">{{ count2Num }}</div>
            <div class="count-label">{{ count2Label }}</div>
          </div>
        </div>
      </div>

      <img
        class="film-poster"
        [src]="posterSrc"
        [attr.alt]="activeMovie?.title || 'Poster'"
        (error)="setFallback($event)"
        loading="lazy"
        decoding="async"
      />
    </div>

    <div class="film-information" *ngIf="type === 'series'">
      <div class="film-text">
        <p class="title">{{ activeSeries?.name }}</p>
        <p class="release" *ngIf="activeSeries?.first_air_date">{{ formatReleaseDate(activeSeries!.first_air_date) }}</p>

        <div class="meta">
          <span class="badge" *ngIf="activeSeries?.rated">{{ activeSeries?.rated }}</span>

          <span class="badge" *ngIf="(genresText || '').length">
            {{ (genresText || '').split(', ').join(' • ') }}
          </span>
        </div>

        <div class="counts">
          <div class="count">
            <div class="count-num">{{ count1Num }}</div>
            <div class="count-label">{{ count1Label }}</div>
          </div>
          
          <div class="count">
            <div class="count-num">{{ count2Num }}</div>
            <div class="count-label">{{ count2Label }}</div>
          </div>
        </div>
      </div>

      <img
        class="film-poster"
        [src]="posterSrc"
        [attr.alt]="activeSeries?.name || 'Poster'"
        (error)="setFallback($event)"
        loading="lazy"
        decoding="async"
      />
    </div>

    <div class="right-bottom">
      <div class="warning-right" [class.active]="rater.warn" aria-live="polite">
        Must select a rating for each criteria
      </div>

      <div class="actions-right">
        <button class="button" type="button" (click)="rater.reset()">Reset</button>
        <button class="button" type="button" (click)="rater.submit()">Rate {{ rater.average }}/10</button>
      </div>
    </div>
  </div>
</div>